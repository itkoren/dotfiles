#
# This file is managed by chezmoi. Always edit it with the command
# chezmoi edit ~/.config/zsh/.zshrc
# chezmoi diff
# chezmoi -v apply
#

# Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.zshrc.
# Initialization code that may require console input (password prompts, [y/n]
# confirmations, etc.) must go above this block; everything else may go below.
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

## CONFIGURATIONS

# Uncomment the following line to use hyphen-insensitive completion. Case
# sensitive completion must be off. _ and - will be interchangeable.
HYPHEN_INSENSITIVE="true"

# Uncomment the following line to enable command auto-correction.
ENABLE_CORRECTION="true"

# Keep 10,000,000 lines of history within the shell and save it to ~/.zsh_history:
HISTSIZE=10000000
SAVEHIST=10000000
HISTFILE=${ZDOTDIR:-$HOME}/.zsh_history

## OPTIONS
setopt NO_CASE_GLOB       # Globbing and tab-completion to be case-insensitive.
setopt GLOB_COMPLETE
setopt AUTO_CD            # Enable changing to directories without typing cd first.

setopt CORRECT            # enable command auto-correction
setopt CORRECT_ALL

# HISTORY
setopt EXTENDED_HISTORY   # enable more detailed history (time, command, etc.)   
setopt SHARE_HISTORY      # share history across multiple zsh sessions
setopt APPEND_HISTORY     # append to history
setopt INC_APPEND_HISTORY # adds commands as they are typed, not at shell exit
setopt HIST_VERIFY        # let you edit !$, !! and !* before executing the command
setopt HIST_IGNORE_DUPS   # do not store duplications
setopt HIST_REDUCE_BLANKS # removes blank lines from history

# public
for file in "${ZDOTDIR:-$HOME}"/conf.d/**/*; do
    if [[ $file == *.sh ]]; then
        source "$file"
    fi
done

# Aliases
if [ -f ${ZDOTDIR:-$HOME}/.aliases ]; then
  . ${ZDOTDIR:-$HOME}/.aliases
fi

# Platform specific customizations
if [ -f ${ZDOTDIR:-$HOME}/.platformrc ]; then
  source ${ZDOTDIR:-$HOME}/.platformrc
fi

ZSH_AUTOSUGGEST_STRATEGY=(history completion)

source ~/antigen.zsh
antigen init ~/.antigenrc

# To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh
